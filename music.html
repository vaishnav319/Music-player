<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css" integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
    <title>music-app</title>
  </head>
  <body>
    <div class="main_div">
        <div class="music_container">
            <h2 id="title">Lotus Lane</h2>
            <h3 id="artist">The Loyalist</h3>
            <div class="img_container">
                <img src="images/song-1.jpg" >
            </div>
            <audio src="music/song-1.mp3"></audio>

            <div class="music_controls">
              <i class="fas fa-backward fa" id="prev" title="Previous"></i>
              <i class="fas fa-play fa main_button" id="play" title="Play"></i>
              <i class="fas fa-forward fa" id="next" title="Next" ></i>
            </div>
        </div>
    </div>

    <script type="text/javascript">
      const music = document.querySelector('audio');
      const img = document.querySelector("img");
      const play = document.getElementById("play");
      const title=document.getElementById("title");
      const artist=document.getElementById("artist");
      const prev=document.getElementById("prev");
      const next=document.getElementById("next");
      const songs = [{
        name:"song-1",
        title:"Lotus Lane",
        artist:"Loyalist",
      },
        {
          name:"song-2",
          title:"Sappherious",
          artist:"aurott",
        },
        {
          name:"song-3",
          title:"Walking firiri",
          artist:"Gorkali Takma",
        },
      ]
      let isplaying = false;
      const playMusic = () =>{
        isplaying= true;
        music.play();
        play.classList.replace('fa-play','fa-pause');
        img.classList.add("anime");

      }

      const pauseMusic = () =>{
        isplaying= false;
        music.pause();
        play.classList.replace('fa-pause','fa-play');
        img.classList.remove("anime");

      }

      play.addEventListener("click",()=>  {
          isplaying ? pauseMusic() : playMusic();
      });

      const loadSong = (songs) =>{
        title.textContent=songs.title;
        artist.textContent=songs.artist;
        music.src="music/"+songs.name+".mp3";
        img.src="images/"+songs.name+".jpg";
      };
      songIndex= 0;
      // loadSong(songs[1]);

      const nextSong = () =>{
        songIndex = (songIndex +1)% songs.length;
        loadSong(songs[songIndex]);
        playMusic();
      }
      const prevSong = () =>{
        songIndex = (songIndex -1+songs.length)% songs.length;
        loadSong(songs[songIndex]);
        playMusic();
      }

      next.addEventListener("click",nextSong);
      prev.addEventListener('click',prevSong)
    </script>
  </body>
</html>
